@import "tailwindcss";

/* =========================================================
   ページ全体（色の統一：緑を使わない）
   ========================================================= */
:root {
  /* Light */
  --page-bg: linear-gradient(to bottom, #bae6fd 0%, #e0f2fe 55%, #fffbeb 100%);
  --page-text: #0f172a;

  /* Accent（緑は使わず “水色/青” に統一） */
  --primary: #0ea5e9;        /* sky-500 */
  --primary-hover: #0284c7;  /* sky-600 */
  --primary-text: #ffffff;

  /* Sub accent（黄色はポイントだけ） */
  --accent-yellow: #fbbf24;  /* amber-400 */

  /* Surfaces (Light) */
  --surface-bg: rgba(255, 255, 255, 0.82);
  --card-bg: rgba(255, 255, 255, 0.92);
  --border: rgba(148, 163, 184, 0.35);
  --muted: #64748b;

  /* Hero */
  --hero-image: url('/hero.png');
  --hero-overlay: linear-gradient(to bottom, rgba(2, 132, 199, 0.18), rgba(251, 191, 36, 0.10));
  --hero-filter: brightness(0.92) contrast(1.06) saturate(1.06);
}

html.dark {
  /* Dark page background（夜の海/星空イメージ） */
  --page-bg: linear-gradient(to bottom, #0b1220 0%, #071022 45%, #020617 100%);
  --page-text: #f8fafc; /* slate-50: より明るい白 */

  /* Accent（ダークでも眩しくない水色） */
  --primary: #38bdf8;        /* sky-400 */
  --primary-hover: #0ea5e9;  /* sky-500 */
  --primary-text: #06121a;

  /* Surfaces (Dark) */
  --surface-bg: rgba(17, 24, 39, 0.70);  /* slate-900 */
  --card-bg: rgba(30, 41, 59, 0.78);     /* slate-800 */
  --border: rgba(148, 163, 184, 0.22);
  --muted: #94a3b8;

  /* Hero（暗すぎを少し持ち上げ） */
  --hero-image: url('/hero_dark.png');
  --hero-overlay: linear-gradient(to bottom, rgba(2, 6, 23, 0.18), rgba(2, 6, 23, 0.52));
  --hero-filter: brightness(1.12) contrast(1.08) saturate(1.06);
}

/* =========================================================
   Base
   ========================================================= */
@layer base {
  html, body { height: 100%; }

  body {
    background: var(--page-bg);
    color: var(--page-text);
    background-attachment: fixed;
    min-height: 100vh;
  }

  #root, main {
    min-height: 100vh;
    background: transparent;
  }

  a { color: inherit; }
  html.dark a { color: #93c5fd; }
  html.dark a:hover { color: #e0f2fe; }

  h1, h2, h3, h4, h5, h6 { @apply text-slate-900; }
  html.dark h1,
  html.dark h2,
  html.dark h3,
  html.dark h4,
  html.dark h5,
  html.dark h6 { color: #e5e7eb; }
}

/* =========================================================
   Components
   ========================================================= */
@layer components {
  /* ================================
     Buttons（緑の代わりに全部これで統一）
     ================================ */
  .btn {
    @apply rounded-full px-5 py-2 font-bold transition;
    background-color: var(--primary);
    color: var(--primary-text);
  }
  .btn:hover { background-color: var(--primary-hover); }

  /* “検索”など小さめの丸ボタンも同系色に */
  .btn-sm {
    @apply rounded-full px-4 py-2 font-bold transition;
    background-color: var(--primary);
    color: var(--primary-text);
  }
  .btn-sm:hover { background-color: var(--primary-hover); }

  /* 薄いボタン（フィルタ/並び替え用） */
  .btn-soft {
    @apply rounded-full px-4 py-2 font-bold transition;
    background: rgba(14, 165, 233, 0.12);
    color: #0369a1; /* sky-700 */
    border: 1px solid rgba(14, 165, 233, 0.25);
  }
  .btn-soft:hover {
    background: rgba(14, 165, 233, 0.18);
    border-color: rgba(14, 165, 233, 0.35);
  }
  html.dark .btn-soft {
    background: rgba(56, 189, 248, 0.12);
    color: #e5e7eb;
    border-color: rgba(148, 163, 184, 0.22);
  }
  html.dark .btn-soft:hover {
    background: rgba(56, 189, 248, 0.16);
    border-color: rgba(148, 163, 184, 0.30);
  }

  /* Inputs */
  .input {
    @apply w-full rounded-2xl border px-4 py-3 outline-none transition;
    border-color: rgba(148, 163, 184, 0.35);
    background: rgba(255,255,255,0.92);
    color: #0f172a;
  }
  html.dark .input {
    background: rgba(2, 6, 23, 0.35);
    border-color: rgba(148, 163, 184, 0.25);
    color: #e5e7eb;
  }
  html.dark .input::placeholder { color: var(--muted); }
  .input:focus { --tw-ring-color: rgba(56, 189, 248, 0.35); }
  html.dark .input:focus { --tw-ring-color: rgba(147, 197, 253, 0.35); }

  /* Cards / Surfaces */
  .card {
    @apply rounded-2xl border shadow-sm;
    background: var(--card-bg);
    border-color: var(--border);
  }

  .surface {
    @apply rounded-3xl border shadow-sm;
    background: var(--surface-bg);
    border-color: var(--border);
    backdrop-filter: blur(10px);
  }

  /* Header / Footer */
  header { background: rgba(224, 242, 254, 0.75); backdrop-filter: blur(6px); }
  html.dark header { background: rgba(15, 23, 42, 0.65); backdrop-filter: blur(8px); }

  footer { background: rgba(224, 242, 254, 0.75); }
  html.dark footer { background: rgba(15, 23, 42, 0.70); }

  /* Hero */
  .hero-section {
    @apply relative w-full flex items-center justify-center text-white;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
    width: 100vw;
  }

  .hero-fullscreen {
    @apply relative text-white overflow-hidden;
    @apply flex items-center justify-center text-center;

    position: fixed;
    inset: 0;
    width: 100%;
    height: 100vh;
    z-index: 0;
  }

  .hero-bg-image { position: absolute; inset: 0; z-index: 0; background: transparent; }

  .hero-bg-image::after {
    content: "";
    position: absolute;
    inset: 0;
    background-image: var(--hero-image);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    filter: var(--hero-filter);
    transform: scale(1.02);
  }

  .hero-overlay {
    @apply absolute inset-0 transition-all duration-500;
    background: var(--hero-overlay);
    z-index: 2;
  }

  .hero-content {
    @apply relative z-10 max-w-3xl text-center px-6 py-10;
    padding: 28px 28px;
    border-radius: 24px;
    background: rgba(255, 255, 255, 0.22);
    backdrop-filter: blur(6px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  }
  html.dark .hero-content {
    background: rgba(2, 6, 23, 0.22);
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  }

  .hero-title { text-shadow: 0 2px 16px rgba(0,0,0,0.55); }
}

/* =========================================================
   ★緑系クラスを “強制的に” 無効化して上書きしたい場合（保険）
   ※ もしUI側で bg-green-500 等が残っているなら効きます
   ========================================================= */
@layer utilities {
  html.dark .bg-green-500,
  html.dark .bg-green-600,
  html.dark .bg-emerald-500,
  html.dark .bg-emerald-600 {
    background-color: var(--primary) !important;
  }

  html.dark .text-green-500,
  html.dark .text-emerald-500 {
    color: var(--primary) !important;
  }
}

/* =========================================================
   ナビ画像ボタン：サイズ＆ラベル位置を“元に戻す”上書き
   （.btn等の影響を遮断）
   ========================================================= */
@layer components {
  /* ヘッダーのナビ（画像＋文字） */
  .nav-btn-vertical {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;                 /* 文字との間隔：元の位置に寄せる */
    padding: 0 !important;    /* .btn の padding を無効化 */
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    line-height: 1;
  }

  .nav-btn-vertical img {
    height: 32px !important;  /* ←元がこのくらいなら32px（以前の h-8 相当） */
    width: auto !important;
    display: block;
  }

  .nav-btn-label {
    width: 96px;              /* w-24 相当 */
    text-align: center;
    font-size: 12px;
    font-weight: 600;
    line-height: 1;           /* 文字の縦ズレ防止 */
    margin: 0 !important;     /* 余計なマージン消す */
    transform: translateY(0); /* 位置ずれリセット */
  }

  /* フッターのナビ（画像＋文字） */
  .footer-btn-vertical {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 0 !important;
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    line-height: 1;
  }

  .footer-btn-vertical img {
    height: 24px !important;
    width: auto !important;
    display: block;
  }

  .footer-btn-label {
    width: 96px;
    text-align: center;
    font-size: 12px;
    font-weight: 600;
    line-height: 1;
    margin: 0 !important;
    transform: translateY(0);
  }
}

/* =========================================================
   ダークモード：カード内の文字色調整
   ========================================================= */
@layer components {
  /* カード全体の文字色 */
  html.dark .card {
    color: #e5e7eb; /* slate-200 */
  }

  /* カード内：タイトル（白文字） */
  html.dark .card h1,
  html.dark .card h2,
  html.dark .card h3,
  html.dark .card h4,
  html.dark .article-title {
    color: #f8fafc; /* slate-50: 白文字 */
    font-weight: 700;
  }

  /* カード内：日付 */
  html.dark .card .article-date,
  html.dark .card time {
    color: #cbd5e1; /* slate-300 */
    font-weight: 600;
  }

  /* カード内：本文 or 説明文 */
  html.dark .card p {
    color: #e5e7eb; /* slate-200 */
  }

  /* placeholder だけは控えめ */
  html.dark input::placeholder {
    color: #94a3b8; /* slate-400 */
  }

  /* カード内の白背景部分は黒文字に（bg-whiteのみ対象） */
  html.dark .card .bg-white {
    color: #0f172a; /* slate-900 */
  }
  /* =========================================================
   Fix: ダークモードでも“小カード(bg-slate-100系)”の文字は黒にする
   （.card配下の見出し白指定に負けないように強めに上書き）
   ========================================================= */
  @layer components {
    /* 小カード（記事/学習記録のグリッドで使ってるやつ想定） */
    html.dark .bg-slate-100,
    html.dark .bg-slate-50,
    html.dark .bg-white {
      color: #0f172a !important; /* slate-900 */
    }

    /* 小カード内の主要テキストをまとめて黒に */
    html.dark .bg-slate-100 h1,
    html.dark .bg-slate-100 h2,
    html.dark .bg-slate-100 h3,
    html.dark .bg-slate-100 p,
    html.dark .bg-slate-50 h1,
    html.dark .bg-slate-50 h2,
    html.dark .bg-slate-50 h3,
    html.dark .bg-slate-50 p,
    html.dark .bg-white h1,
    html.dark .bg-white h2,
    html.dark .bg-white h3,
    html.dark .bg-white p {
      color: #0f172a !important; /* slate-900 */
    }

    /* 小カード内の薄い補助文字（著者名とか）だけ少し落とす */
    html.dark .bg-slate-100 .text-slate-600,
    html.dark .bg-slate-50 .text-slate-600,
    html.dark .bg-white .text-slate-600 {
      color: #334155 !important; /* slate-700 */
    }
  }
}
