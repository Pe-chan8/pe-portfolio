<section class="card p-8">
  <div class="flex items-end justify-between mb-6">
    <h1 class="text-3xl font-extrabold">Articles</h1>

    <div class="flex gap-2">
      <%= link_to "カード", articles_path(view: "grid", q: params[:q]), class: "pill" %>
      <%= link_to "リスト", articles_path(view: "list", q: params[:q]), class: "pill" %>
    </div>
  </div>

  <!-- 検索 -->
  <%= search_form_for @q, url: articles_path, method: :get do |f| %>
    <div class="flex gap-3 mb-6">
      <%= f.search_field :title_or_summary_or_body_cont,
            placeholder: "記事検索",
            class: "input" %>
      <%= f.submit "検索", class: "btn" %>
    </div>
  <% end %>

  <% if @view == "list" %>
    <div class="space-y-3">
      <% @articles.each do |article| %>
        <div class="flex items-center gap-4 rounded-2xl bg-slate-100 p-4 dark:bg-slate-900">
          <div class="w-28 text-sm font-bold">
            <%= article.published_on || "日付未設定" %>
          </div>
          <div class="flex-1 font-bold">
            <%= article.title %>
          </div>
          <%= link_to "詳細", article_path(article), class: "btn" %>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="grid gap-6 sm:grid-cols-3">
      <% @articles.each do |article| %>
        <div class="rounded-2xl bg-slate-100 p-4 dark:bg-slate-900">
          <p class="text-sm font-bold text-center">
            <%= article.published_on || "日付未設定" %>
          </p>
          <h2 class="mt-2 text-center font-bold"><%= article.title %></h2>
          <div class="mt-4">
            <%= link_to "詳細を見る", article_path(article), class: "btn w-full" %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</section>
