<section class="mx-auto w-full max-w-5xl px-6 py-10">
  <div class="card p-8">
    <h1 class="text-3xl font-extrabold"><%= @book.title %></h1>

    <% if @book.authors.present? %>
      <p class="mt-2 text-lg font-semibold text-slate-600 dark:text-slate-300"><%= @book.authors %></p>
    <% end %>

    <div class="mt-3 flex flex-wrap gap-2">
      <% @book.tags.each do |tag| %>
        <span class="rounded-full bg-sky-200 px-2 py-1 text-xs font-semibold text-slate-900 dark:bg-sky-500 dark:text-white">
          <%= tag.name %>
        </span>
      <% end %>
    </div>

    <div class="mt-6 grid gap-4 sm:grid-cols-2">
      <div>
        <% cover_url = @book.respond_to?(:cover_image_url) ? @book.cover_image_url.presence : nil %>

        <% if cover_url %>
          <%= image_tag cover_url,
                        class: "w-full rounded-2xl object-cover aspect-[3/4]",
                        alt: "#{@book.title}の表紙",
                        loading: "lazy",
                        referrerpolicy: "no-referrer" %>
        <% else %>
          <%= image_tag "static/book_cover_placeholder.png",
                        class: "w-full rounded-2xl object-cover aspect-[3/4]",
                        alt: "#{@book.title}の表紙（未登録）",
                        loading: "lazy" %>
        <% end %>
      </div>

      <div class="space-y-4">
        <div class="rounded-xl bg-sky-100 px-4 py-3 dark:bg-sky-900">
          <div class="text-sm font-semibold text-slate-600 dark:text-slate-300">読了日</div>
          <div class="mt-1 text-2xl font-extrabold text-sky-700 dark:text-sky-300">
            <%= @book.read_on.strftime("%Y年%m月%d日") %>
          </div>
        </div>

        <div class="space-y-2 text-sm">
          <% if @book.published_on.present? %>
            <div class="rounded-lg bg-slate-100 px-3 py-2 dark:bg-slate-900">
              <span class="font-semibold">出版日：</span>
              <%= @book.published_on.strftime("%Y年%m月%d日") %>
            </div>
          <% end %>

          <% if @book.publisher.present? %>
            <div class="rounded-lg bg-slate-100 px-3 py-2 dark:bg-slate-900">
              <span class="font-semibold">出版社：</span>
              <%= @book.publisher %>
            </div>
          <% end %>

          <% if @book.isbn.present? %>
            <div class="rounded-lg bg-slate-100 px-3 py-2 dark:bg-slate-900">
              <span class="font-semibold">ISBN：</span>
              <%= @book.isbn %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <% if @book.summary.present? %>
      <div class="mt-8 rounded-xl bg-slate-100 px-5 py-4 dark:bg-slate-900">
        <div class="text-lg font-extrabold text-center mb-3">概要・メモ</div>
        <div class="text-sm text-slate-700 dark:text-slate-200 whitespace-pre-wrap leading-relaxed">
          <%= @book.summary %>
        </div>
      </div>
    <% end %>

    <div class="mt-8">
      <%= link_to "← 学習記録一覧へ", books_path, class: "hover:underline text-sm font-semibold" %>
    </div>
  </div>
</section>
